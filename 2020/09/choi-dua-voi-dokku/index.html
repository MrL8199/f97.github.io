<!DOCTYPE html><html lang="vi,en,default"><head><link rel="manifest" href="/manifest.json"><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1"><meta http-equiv="X-UA-Compatible" content="ie=edge"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inconsolata:400,700&display=swap&subset=vietnamese"><meta name="author" content="Huỳnh Đức Khoản"><meta name="subtitle" content="by Huỳnh Đức Khoản"><meta name="description" content="Một con người luôn nhìn sự thay đổi của thế giới bằng con mắt của người cõi trên… :)))"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script><link href="https://emoji-css.afeld.me/emoji.css" rel="stylesheet"><title>Chơi Đùa Với Dokku | Dev Cùi</title><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/custom.css"><meta name="generator" content="Hexo 5.2.0"><link rel="alternate" href="/rss.xml" title="Dev Cùi" type="application/rss+xml">
</head><body><div class="wrapper"><header><nav class="navbar"><div class="container"><div class="navbar-header header-logo"><a href="/">Dev Cùi</a></div><div class="menu navbar-right"><a class="menu-item" href="/archives">Timeline</a> <a class="menu-item" href="/bucket-list">Bucket List</a> <a class="menu-item" href="/code">Code</a> <a class="menu-item" href="/about">About</a> <input id="switch_default" type="checkbox" class="switch_default"> <label for="switch_default" class="toggleBtn"></label></div></div></nav><nav class="navbar-mobile" id="nav-mobile"><div class="container"><div class="navbar-header"><div><a href="/">Dev Cùi</a><a id="mobile-toggle-theme">· Light</a></div><div class="menu-toggle" onclick="mobileBtn()">☰ Menu</div></div><div class="menu" id="mobile-menu"><a class="menu-item" href="/archives">Timeline</a> <a class="menu-item" href="/bucket-list">Bucket List</a> <a class="menu-item" href="/code">Code</a> <a class="menu-item" href="/about">About</a></div></div></nav></header><script>var mobileBtn=function(){var e=document.getElementsByClassName("menu-toggle")[0],t=document.getElementById("mobile-menu");e.classList.contains("active")?(e.classList.remove("active"),t.classList.remove("active")):(e.classList.add("active"),t.classList.add("active"))}</script><div class="main"><div class="container"><div class="post-toc"><div class="tocbot-list"></div><div class="tocbot-list-menu"><a class="tocbot-toc-expand" onclick="expand_toc()">Expand all</a> <a onclick="go_top()">Back to top</a> <a onclick="go_bottom()">Go to bottom</a></div></div><script>function expand_toc(){var o=document.querySelector(".tocbot-toc-expand");tocbot.init({tocSelector:".tocbot-list",contentSelector:".post-content",headingSelector:"h1, h2, h3, h4, h5",collapseDepth:6,orderedList:!1,scrollSmooth:!0}),o.setAttribute("onclick","collapse_toc()"),o.innerHTML="Collapse all"}function collapse_toc(){var o=document.querySelector(".tocbot-toc-expand");tocbot.init({tocSelector:".tocbot-list",contentSelector:".post-content",headingSelector:"h1, h2, h3, h4, h5",collapseDepth:1,orderedList:!1,scrollSmooth:!0}),o.setAttribute("onclick","expand_toc()"),o.innerHTML="Expand all"}function go_top(){window.scrollTo(0,0)}function go_bottom(){window.scrollTo(0,document.body.scrollHeight)}window.onload=function(){expand_toc(),collapse_toc()},document.ready((function(){tocbot.init({tocSelector:".tocbot-list",contentSelector:".post-content",headingSelector:"h1, h2, h3, h4, h5",collapseDepth:1,orderedList:!1,scrollSmooth:!0})}))</script><article class="post-wrap"><header class="post-header"><h1 class="post-title">Chơi Đùa Với Dokku</h1><div class="post-meta">Author: <a itemprop="author" rel="author" href="/">Huỳnh Đức Khoản</a> <span class="post-time">Date: <a href="#">19/09/2020  13:10:15</a></span></div></header><div class="post-content"><p>Hellloooo…</p><p>Các bạn biết heroku không, và cái giá của heroku thì không rẻ tẹo nào đúng hông! Và dù sao chúng ta cũng là dev, thôi thì mua một cái server mà build luôn heroku lên đó dùng unlimited cho sướng đúng không nào.</p><p>Thôi bỏ qua màn giới thiệu, vào chơi với nó nào.</p><h2 id="I-Heroku-voi-Dokku-la-gi"><a href="#I-Heroku-voi-Dokku-la-gi" class="headerlink" title="I. Heroku với Dokku là gì?"></a>I. Heroku với Dokku là gì?</h2><p>Ý tưởng tạo một cái heroku trên máy chủ của mình vào một ngày mình nhận ra, mình thường tạo rất nhiều app node, react, python… Vậy tại sao mình không tạo một cái server để xài mà phải dùng dịch vụ của thằng heroku? Dù sao mình cũng là dev culi và có nhiều thời gian rảnh mà ( 11:00 PM đến 2:00 AM =))) )</p><p>Và qua quá trình tìm hiểu thì mình biết được Heroku là một cái PaaS (Platform as a service), vậy là ngay lập tức mình tìm các công cụ PaaS self hosted đang chia sẻ open source trên mạng, và may mắn là mình tìm được vài cái tên và trong đó Dokku là cái tên nổi bật nhất.</p><p>Vậy PaaS là gì? Bạn tự tìm hiểu đi nhé.</p><h2 id="II-Quick-start-with-Dokku"><a href="#II-Quick-start-with-Dokku" class="headerlink" title="II. Quick-start with Dokku"></a>II. Quick-start with Dokku</h2><p>Muốn dùng nó thì cài được nó trên server, thôi bắt đầu nào.. =))) Mình vừa tạo một cái vps mới rồi =))) </p><h3 id="1-CAI-DOKKU-NAO"><a href="#1-CAI-DOKKU-NAO" class="headerlink" title="1. CÀI DOKKU NÀO"></a>1. CÀI DOKKU NÀO</h3><p>Cứ mặc định coi như quá trình SSH, setup server… bạn đã biết rồi và mình chỉ bắt đầu với dokku nhé. À mà bạn nên dùng Ubuntu vì nó hỗ trợ tốt nhất, riêng mình đang tạo vps <em>ubuntu 18.04 minimal.</em></p><h4 id="Cai-no-len-VPS"><a href="#Cai-no-len-VPS" class="headerlink" title="Cài nó lên VPS"></a>Cài nó lên VPS</h4><p>Đây là mấy dòng lệnh cài nó: </p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget https://raw.githubusercontent.com/dokku/dokku/v0.21.4/bootstrap.sh</span><br><span class="line">sudo DOKKU_TAG=v0.21.4 bash bootstrap.sh</span><br></pre></td></tr></tbody></table></figure><p>Và đây là cách mình chạy nó ( copy + paste )</p><p><img src="https://lh6.googleusercontent.com/xNktzLsoGRnLdmVfkYWdXBZi0jMvX-AZF0m517MZnmkxmrMoHouMze7PGi7edNom5MdbtfCHn8TD96aXHCgxU1JnXIPfmw51EBsl1VS4oSSfByWrvxVjudlKwQdWaGo_1EaaKDoY"></p><p>Pha ly cà phê rồi nhâm nhi nhé =))) Quá trình này mất tầm 30s đến vài phút tùy vào giá tiền bạn có thể bỏ ra. ( Cái server của mình là 30 phút :(( )</p><p>Khi nào nó lòi ra cái màn hình như thế này là xong rồi nhé</p><p><img src="https://lh4.googleusercontent.com/QZh3ZDI8Ge_d0lnerE5sQ4GKhAa0MvaMowsg1Uoav1Hrrdkin_3DpcpHM7DsPz-TPCgnCAIvUMV0ubR2rAuI7RjysUr6zaoVvtBAzDtu634-usym-8Yl6NMQXt_T0ks98nwIrSjM"></p><p>Sau khi cài xong mà bạn để đó là toi rồi nhé, cần phải cấu hình thêm vài cái nữa nè</p><h3 id="DOI-PASSWORD-CHO-DOKKU-ACCOUNT"><a href="#DOI-PASSWORD-CHO-DOKKU-ACCOUNT" class="headerlink" title="ĐỔI PASSWORD CHO DOKKU ACCOUNT"></a>ĐỔI PASSWORD CHO DOKKU ACCOUNT</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">root@devcui:~<span class="comment"># passwd dokku</span></span><br><span class="line">Enter new UNIX password: </span><br><span class="line">Retype new UNIX password: </span><br><span class="line">passwd: password updated successfully</span><br><span class="line">root@devcui:~<span class="comment"># </span></span><br></pre></td></tr></tbody></table></figure><p><img src="https://lh3.googleusercontent.com/56OeY5qJ20k_BwEeb5Xj1XWPntulPxTqw5_EEySt8UiNVsPE63SMu1PCpfySKtmNQBxB749It1U6061NaGlU2JH_1qOGecy2dLRx9Mwc6XFbPQFs6AxaG_gbJ2OimSfFeCtuMexn"></p><p>Đổi mật khẩu cho acc dokku của vps nhé bạn tôi</p><h4 id="Tao-Public-SSH-Keys-nhap-key-va-setup-hostname"><a href="#Tao-Public-SSH-Keys-nhap-key-va-setup-hostname" class="headerlink" title="Tạo Public SSH Keys, nhập key và setup hostname"></a>Tạo Public SSH Keys, nhập key và setup hostname</h4><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -o</span><br><span class="line">cat ~/.ssh/id_rsa.pub</span><br></pre></td></tr></tbody></table></figure><p><img src="https://lh5.googleusercontent.com/kHAkSRCcYVDxV5aGZE4pfzFliZjgl5Ac37Sfy4-zfsW4NOeDnXLtKNyvTKlz_YcHGLbPV9XaPi03UZBFUg8eypBS-mbHuIKgt9VDiW__d3mutecxSqrjSKn1AitJMDtaUMwjONZL"></p><p>Sau đó truy cập vào ip của vps trên trình duyệt rồi paste nó vào, như hình này nè, nhớ nhập IP vào chỗ hostname nhé</p><p><img src="https://lh4.googleusercontent.com/rhYqIbeMlrG1ULoxKMgmnw79EngtzW_bglVmwcb4rLcBLNVVkZPM2O06NqAtyMB__TQQq_EjXEodjHxNTfNupxiiyh2cDfZBC8b0r_9uiouzYm_XOVQredgHm8sywFiZ4HeXbwB8"></p><p>Xong, quá trình cài đặt coi như xong nhé</p><h3 id="2-TAO-CAI-APP-VAO-BUILD-NO-THOI-NAO"><a href="#2-TAO-CAI-APP-VAO-BUILD-NO-THOI-NAO" class="headerlink" title="2. TẠO CÁI APP VÀO BUILD NÓ THÔI NÀO"></a>2. TẠO CÁI APP VÀO BUILD NÓ THÔI NÀO</h3><p>Mình đã tạo bộ mã nguồn siêu xịn sò để test, bạn có thể check ở đây nhé :</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/devcui/dokku-node-example</span><br></pre></td></tr></tbody></table></figure><p>Oke, giờ tạo app ta dùng lệnh</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dokku apps:create dokku-node-example</span><br><span class="line">dokku git:initialize dokku-node-example</span><br></pre></td></tr></tbody></table></figure><p>Rồi bạn trỏ domain của bạn về IP của host, tuỳ vào việc bạn dùng nhà cung cấp tên miền nào thì nó sẽ có giao diện khác nhau nên mình đi bước tiếp.</p><p>Thêm tên miền của bạn vào app.</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dokku domains:add dokku-node-example dokku-node-example.devcui.com</span><br></pre></td></tr></tbody></table></figure><h3 id="3-DAY-CODE-LEN-APP-CUA-DOKKU-NAO"><a href="#3-DAY-CODE-LEN-APP-CUA-DOKKU-NAO" class="headerlink" title="3. ĐẨY CODE LÊN APP CỦA DOKKU NÀO"></a>3. ĐẨY CODE LÊN APP CỦA DOKKU NÀO</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/devcui/dokku-node-example.git</span><br><span class="line"><span class="built_in">cd</span> dokku-node-example</span><br></pre></td></tr></tbody></table></figure><p>Trước tiên thì cứ clone về rồi cd vào git cái đã nè, hoặc nó đã nằm trên máy của bạn thì thôi khỏi cần cũng được.</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git remote add dokku dokku@35.237.140.234:dokku-node-example</span><br><span class="line">git push dokku master</span><br></pre></td></tr></tbody></table></figure><p>Rồi thêm dokku vào git, giống với heroku thôi.</p><p><img src="https://lh6.googleusercontent.com/CVerq43g3Yw6YDpFSrkw--pj2D1N2N2ebfrb9szsOpKbdLst7GEly97oRs1MExKL3-qryHnCWVQAGCLYld3ALJuMZuI8Nec5MazLww5fzhxKrWLigPY_bLHyNzIWhtepNNhiO_bB"></p><p>Xong chuyện còn lại hãy để dokku lo =))</p><p><img src="https://lh6.googleusercontent.com/uwRf13XXcDl7zOfefid6x6UebkMHVUAugd_i60YjNMtHOJ7xc6lKZxFC6thgnG8GU9XTTM4aD2uRcWK5u1HHf83sG2AFUUHU_97DqP3Fe_RvS9WOIIXrkxIF53jhGIYsfajvxTx8"></p><p>Cuối cùng thì chuyện gì đến sẽ đến thôi phải không nào.</p><h2 id="III-Vai-trick-nho-voi-Dokku"><a href="#III-Vai-trick-nho-voi-Dokku" class="headerlink" title="III. Vài trick nhỏ với Dokku"></a>III. Vài trick nhỏ với Dokku</h2><p style="text-align:right">to be continued</p></div><section class="post-copyright"><p class="copyright-item"><span>Author:</span> <span>Huỳnh Đức Khoản</span></p><p class="copyright-item"><span>Permalink:</span> <span><a href="https://devcui.com/2020/09/choi-dua-voi-dokku/">https://devcui.com/2020/09/choi-dua-voi-dokku/</a></span></p><p class="copyright-item"><span>License:</span> <span>Copyright (c) 2020 <a target="_blank" rel="noopener" href="http://creativecommons.org/licenses/by-nc/4.0/">CC-BY-NC-4.0</a> LICENSE</span></p><p class="copyright-item"><span>Slogan:</span> <span>Trưởng thành cũng chỉ là việc giỏi chịu đựng hơn mà thôi</span></p></section><section class="post-tags"><div><span>Tag(s):</span> <span class="tag"><a href="/tags/devops/"># devops</a> <a href="/tags/code/"># code</a></span></div><div><a href="javascript:window.history.back();">back</a> <span>· </span><a href="/">home</a></div></section><section class="post-nav"><a class="prev" rel="prev" href="/2020/09/gioi-thieu-devilbox/">Giới thiệu về Devilbox, giải pháp thay thế XAMPP trong thời đại 4.0</a> <a class="next" rel="next" href="/2020/05/the-gioi-alibaba-cua-jack-ma/">[Review Sách] Thế giới Alibaba của Jack Ma</a></section><section class="post-comment"><div id="gitalk-container"></div></section><script>const gitalk=new Gitalk({clientID:"2f89a73c3f66b254da26",clientSecret:"ea068661f2d84b00fb264727ebe4b786f7e18bbc",repo:"f97.github.io",owner:"f97",admin:["f97","huynhduckhoan@gmail.com","admin@mrsoi.com"],id:location.pathname.substring(8,57),distractionFreeMode:!0});gitalk.render("gitalk-container")</script></article></div></div><footer id="footer" class="footer"><div class="copyright"><span>© Huỳnh Đức Khoản | Writing By <a href="https://mrsoi.com" target="_blank">Huỳnh Đức Khoản</a></span></div></footer></div><script>"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js?t=1606198452079").then((function(){console.log("ServiceWorker Register Successfully.")})).catch((function(e){console.error(e)}))</script><script type="text/javascript" src="/js/bundle.min.js"></script></body></html>